<!DOCTYPE html>
    <html>
    <head>
        <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
        <title>PlayStation 2 Controller Interface</title>
        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
        
        <style>
.task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }
</style>
        <style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        
        
    </head>
    <body>
        <h1 id="playstation-2-controller-interface">PlayStation 2 Controller Interface</h1>
<p>This document will detail the interface used by the
PlayStation 2 to communicate with the DualShock 2
controllers.</p>
<h2 id="physical-layer">Physical Layer</h2>
<h3 id="controller-inputs">Controller Inputs</h3>
<p>The DualShock controller consists of several different kinds
of inputs:</p>
<ul>
<li>12 digital/analog buttons</li>
<li>4 digital-only buttons</li>
<li>2 analog joysticks</li>
</ul>
<p>Based on the configuration, the 12 main buttons can be
either simple on/off buttons or fully pressure-sensitive
analog inputs. Start, select, L3, and R3 (joystick buttons)
are digital-only.</p>
<p>The analog joysticks both sit on a two-axis grid and report
their position as a pair of X-Y coordinates.</p>
<p>The controller also has two motors, one larger in the left
and one smaller on the right, that can be used for vibration
feedback.</p>
<h3 id="connector-pinout">Connector Pinout</h3>
<p>There are nine pins on the DualShock connector, of which
only eight are used. The pins are as follows, from left to
right on the male side:</p>
<ol>
<li>Brown - Data (controler to console)</li>
<li>Orange - Command (console to controller)</li>
<li>Gray - Motor power (7.2V - 9V)</li>
<li>Black - Ground (GND)</li>
<li>Red - Power (3.3V)</li>
<li>Yellow - Attention</li>
<li>Blue - Clock</li>
<li>White - Unused</li>
<li>Green - Acknowledge</li>
</ol>
<h3 id="data-wires">Data Wires</h3>
<p>The PlayStation 2 uses a modified version of the
<a href="https://en.wikipedia.org/wiki/Serial_Peripheral_Interface">SPI</a>
protocol to communicate with the controller. This protocol is
discussed more in-depth in the <a href="#data-layer">Data Layer</a> section.</p>
<p>SPI uses four pins: two data pins (MISO and MOSI), a clock
pin, and a select pin.</p>
<ul>
<li>
<p>The <strong>brown</strong> data wire is the equivalent of the MISO pin in
SPI. This pin is used to transfer data from the controller to
the console. It is an open-collector output, so it requires a
pull-up resistor of about 1k to 10k Ohms.</p>
</li>
<li>
<p>The <strong>orange</strong> command wire is the equivalent of the MOSI pin
in SPI. This pin is used by the console to send commands to the
controller, e.g. to request button data.</p>
</li>
<li>
<p>The <strong>blue</strong> clock wire is the equivalent of the SPI clock
pin. Officially the speed of this clock is 500kHz, but I have
found that 250kHz is more reliable, especially with 3rd-party
controllers.</p>
</li>
<li>
<p>The <strong>yellow</strong> attention wire is the equivalent of the select
pin in SPI. It should float high when not in use and be
pulled low before each data transfer, then released high
again.</p>
</li>
</ul>
<p>Additionally, the <strong>green</strong> acknowledge wire is an output from the
controller which verifies that it is connected and transmitting
properly. If you are interfacing with a controller, you have the
option to check this pin or not (I generally do not).
However, you must provide this output if you plan to interface
with the PlayStation 2 console as it requires this pin to behave
properly.</p>
<h3 id="power-wires">Power Wires</h3>
<ul>
<li>
<p>The red power line is officially 5V but it works easily at
3.3V and should work anywhere between 3-5V.</p>
</li>
<li>
<p>The gray power line which powers the vibration motors is
listed as 9V but can work as low as 5V. The power of the
vibration scales with the voltage (high voltag = more
vibration). However, the motors can draw 500mA or more,
so be careful about the power source.</p>
</li>
</ul>
<h2 id="data-layer">Data Layer</h2>
<p>The communication protocol used by the PS2 is a modified form
of SPI with a custom data protocol. SPI is full-duplex,
meaning the console sends commands to the controller and gets
the response within the same transaction.</p>
<h3 id="transaction-overview">Transaction Overview</h3>
<p>The general format for a transation goes like this:</p>
<ol>
<li>The PS2 console pulls the select pin low to indicate it is
starting a transaction.</li>
<li>The console then sends a 3-byte header, and in the same
bytes the controller sends a 3-byte reponse indicating
the current configuration state.</li>
<li>The console then sends 2 bytes indicating the vibration
level, and the console sends the digital button states.</li>
<li>Depending on the configuration, the controller will then
send up to 16 additional bytes with the joystick and
analog button data.</li>
</ol>
<h3 id="high-level-protocol">High-Level Protocol</h3>
<p>When the controller is first plugged in it defaults to digital
mode and transmits only the digital button data.</p>
<h4 id="digital-mode">Digital Mode</h4>
<table>
<thead>
<tr>
<th>Byte #</th>
<th style="text-align:center">1</th>
<th style="text-align:center">2</th>
<th style="text-align:center">3</th>
<th style="text-align:center">4</th>
<th style="text-align:center">5</th>
</tr>
</thead>
<tbody>
<tr>
<td>Command (hex)</td>
<td style="text-align:center">0x01</td>
<td style="text-align:center">0x42</td>
<td style="text-align:center">0x00</td>
<td style="text-align:center">0x00</td>
<td style="text-align:center">0x00</td>
</tr>
<tr>
<td>Data (hex)</td>
<td style="text-align:center">0xFF</td>
<td style="text-align:center">0x41</td>
<td style="text-align:center">0x5A</td>
<td style="text-align:center">0xFF</td>
<td style="text-align:center">0xFF</td>
</tr>
<tr>
<td>Section</td>
<td style="text-align:center">H</td>
<td style="text-align:center">H</td>
<td style="text-align:center">H</td>
<td style="text-align:center">D</td>
<td style="text-align:center">D</td>
</tr>
</tbody>
</table>
<p>The first 3 bytes sent from the console are the header
(section H).</p>
<ul>
<li>First byte:
<ul>
<li>Console always sends 0x01</li>
<li>Controller always sends 0xFF</li>
</ul>
</li>
<li>Second byte:
<ul>
<li>Console sends <a href="#command-type">command type</a>, in this case 0x42</li>
<li>Controller sends current <a href="#device-mode">device mode</a>, in this case 0x41</li>
</ul>
</li>
<li>Third byte:
<ul>
<li>Console always sends 0x00</li>
<li>Controller always sends 0x5A</li>
</ul>
</li>
</ul>
<p>After the header comes the data section, which can be between
2 and 18 bytes. In the default digital mode, this consists of
2 bytes</p>
<h4 id="command-type">Command Type</h4>
<h2 id="sources">Sources</h2>
<p>This data was collected over time from various sites, and I
want to pay credit to those who have gone before me and did
the hard work of reverse engineering the SPI protocols.</p>
<ol>
<li>Curious Inventor: Interfacing a PS2 (PlayStation 2) Controller
<a href="http://store.curiousinventor.com/PS2">http://store.curiousinventor.com/PS2</a></li>
</ol>

    </body>
    </html>