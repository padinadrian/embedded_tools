<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Adrian Padin (padin.adrian@gmail.com)" />
  <meta name="dcterms.date" content="2020-12-06" />
  <title>PlayStation 2 Controller Interface</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      word-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">PlayStation 2 Controller Interface</h1>
<p class="author">Adrian Padin (padin.adrian@gmail.com)</p>
<p class="date">December 6, 2020</p>
</header>
<p>This document will detail the interface used by the PlayStation 2 to communicate with the DualShock 2 controllers, as well as examples for using the adrian::PS2 software interface.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<ol type="1">
<li><a href="#physical-layer">Physical Layer</a></li>
<li><a href="#data-layer">Data Layer</a></li>
<li><a href="#software">Software</a></li>
</ol>
<h2 id="physical-layer">Physical Layer</h2>
<h3 id="controller-inputs">Controller Inputs</h3>
<p>The DualShock controller consists of several different kinds of inputs:</p>
<ul>
<li>12 digital/analog buttons</li>
<li>4 digital-only buttons</li>
<li>2 analog joysticks</li>
</ul>
<p>Based on the configuration, the 12 main buttons can be either simple on/off buttons or fully pressure-sensitive analog inputs. Start, select, and L3/R3 (joystick buttons) are digital-only.</p>
<p>The analog joysticks both sit on a two-axis grid and report their position as a pair of X-Y coordinates.</p>
<p>The controller also has two motors, one larger in the left and one smaller on the right, that can be used for vibration feedback.</p>
<h3 id="connector-pinout">Connector Pinout</h3>
<p>There are nine pins on the DualShock connector, of which only eight are used. The pins are as follows, from left to right on the male side:</p>
<ol type="1">
<li>Brown - Data (controler to console)</li>
<li>Orange - Command (console to controller)</li>
<li>Gray - Motor power (7.2V - 9V)</li>
<li>Black - Ground (GND)</li>
<li>Red - Power (3.3V)</li>
<li>Yellow - Attention</li>
<li>Blue - Clock</li>
<li>White - Unused</li>
<li>Green - Acknowledge</li>
</ol>
<h4 id="male-connector">Male Connector</h4>
<p><img src="ps2_connector.jpg" title="DualShock connector wires." /></p>
<h3 id="data-wires">Data Wires</h3>
<p>The PlayStation 2 uses a modified version of the <a href="https://en.wikipedia.org/wiki/Serial_Peripheral_Interface">SPI</a> protocol to communicate with the controller. This protocol is discussed more in-depth in the <a href="#data-layer">Data Layer</a> section.</p>
<p>SPI uses four pins: two data pins (MISO and MOSI), a clock pin, and a select pin.</p>
<ul>
<li><p>The <strong>brown</strong> data wire is the equivalent of the MISO pin in SPI. This pin is used to transfer data from the controller to the console. It is an open-collector output, so it requires a pull-up resistor of about 1k to 10k Ohms.</p></li>
<li><p>The <strong>orange</strong> command wire is the equivalent of the MOSI pin in SPI. This pin is used by the console to send commands to the controller, e.g. to request button data.</p></li>
<li><p>The <strong>blue</strong> clock wire is the equivalent of the SPI clock pin. Officially the speed of this clock is 500kHz, but I have found that 250kHz is more reliable, especially with 3rd-party controllers.</p></li>
<li><p>The <strong>yellow</strong> attention wire is the equivalent of the select pin in SPI. It should float high when not in use and be pulled low before each data transfer, then released high again.</p></li>
</ul>
<p>Additionally, the <strong>green</strong> acknowledge wire is an output from the controller which verifies that it is connected and transmitting properly. If you are interfacing with a controller, you have the option to check this pin or not (I generally do not). However, you must provide this output if you plan to interface with the PlayStation 2 console as it requires this pin to behave properly.</p>
<h3 id="power-wires">Power Wires</h3>
<ul>
<li><p>The red power line is officially 5V but it works easily at 3.3V and should work anywhere between 3-5V.</p></li>
<li><p>The gray power line which powers the vibration motors is listed as 9V but can work as low as 5V. The power of the vibration scales with the voltage (high voltage = more vibration). However, the motors can draw 500mA or more, so be careful about the power source.</p></li>
</ul>
<h2 id="data-layer">Data Layer</h2>
<p>The communication protocol used by the PS2 is a modified form of SPI with a custom data protocol. SPI is full-duplex, meaning the console sends commands to the controller and gets the response within the same transaction.</p>
<h3 id="transaction-overview">Transaction Overview</h3>
<p>The general format for a transation goes like this:</p>
<ol type="1">
<li><p>The PS2 console pulls the select pin low to indicate it is starting a transaction.</p></li>
<li><p>The console then sends a 3-byte header, and in the same bytes the controller sends a 3-byte reponse indicating the current configuration state.</p></li>
<li><p>The console then sends 2 bytes indicating the vibration level, and the console sends the digital button states.</p></li>
<li><p>Depending on the configuration, the controller will then send up to 16 additional bytes with the joystick and analog button data.</p></li>
</ol>
<h3 id="high-level-protocol">High-Level Protocol</h3>
<p>When the controller is first plugged in it defaults to digital mode and transmits only the digital button data.</p>
<table>
<thead>
<tr class="header">
<th>Byte #</th>
<th style="text-align: center;">1</th>
<th style="text-align: center;">2</th>
<th style="text-align: center;">3</th>
<th style="text-align: center;">4</th>
<th style="text-align: center;">5</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Command (hex)</td>
<td style="text-align: center;">0x01</td>
<td style="text-align: center;">0x42</td>
<td style="text-align: center;">0x00</td>
<td style="text-align: center;">0x00</td>
<td style="text-align: center;">0x00</td>
</tr>
<tr class="even">
<td>Data (hex)</td>
<td style="text-align: center;">0xFF</td>
<td style="text-align: center;">0x41</td>
<td style="text-align: center;">0x5A</td>
<td style="text-align: center;">0xFF</td>
<td style="text-align: center;">0xFF</td>
</tr>
<tr class="odd">
<td>Section</td>
<td style="text-align: center;">H</td>
<td style="text-align: center;">H</td>
<td style="text-align: center;">H</td>
<td style="text-align: center;">D</td>
<td style="text-align: center;">D</td>
</tr>
</tbody>
</table>
<p>The first 3 bytes sent from the console are the header (section H).</p>
<h4 id="first-byte">First Byte</h4>
<ul>
<li><p>Console always sends 0x01</p></li>
<li><p>Controller always sends 0xFF</p></li>
</ul>
<h4 id="second-byte">Second Byte</h4>
<ul>
<li><p>Console sends <a href="#command-type">command type</a>, in this case 0x42</p></li>
<li><p>Controller sends current <a href="#device-mode">device mode</a>, in this case 0x41</p></li>
</ul>
<h4 id="third-byte">Third Byte</h4>
<ul>
<li><p>Console always sends 0x00</p></li>
<li><p>Controller always sends 0x5A</p></li>
</ul>
<p>After the header comes the data section, which can be between 2 and 18 bytes. In the default digital mode, this consists of 2 bytes which are the vibration commands, where a higher number means stronger vibration.</p>
<h4 id="command-type">Command Type</h4>
<p>TODO</p>
<h2 id="software">Software</h2>
<p>The basic functionality for using the DualShock controller in your embedded projects is wrapped in the adrian::DualShock class. This interface is designed to be easily extendable to any project - simply implement the proper interfaces and you can connect to the controller and read data.</p>
<p>You will need to implement:</p>
<ul>
<li><p>adrian::SPI</p></li>
<li><p>adrian::GPIO</p></li>
</ul>
<p>Note: Implementations for these classes are already available for Arduino-based platforms.</p>
<p>Example of using the DualShock class:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> MySPI : <span class="kw">public</span> adrian::SPI { <span class="co">/* implementation goes here */</span>};</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> MyGPIO : <span class="kw">public</span> adrian::GPIO { <span class="co">/* implementation goes here */</span>};</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>main()</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Initialization</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    MySPI spi_impl;</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    MyGPIO select_pin;</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    spi_impl.Initialize();</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    adrian::DualShock ps2_controller(&amp;spi_impl, &amp;select_pin);</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Get button data</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    adrian::DualShock::ButtonState buttons;</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    ps2_controller.Poll(buttons);</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="dualshock-class">DualShock Class</h3>
<p>Here is a simplified version of the DualShock class:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">/** Represents a DualShock controller. */</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> DualShock</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span>:</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    DualShock(SPI* <span class="at">const</span> spi_interface);</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Connect and disconnect the controller.</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">bool</span> Connect();</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">bool</span> Disconnect();</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">bool</span> IsConnected() <span class="at">const</span>;</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Ask the controller for button info and</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">// send rumble commands.</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> Poll(ButtonState&amp; current_button_states);</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> Poll(<span class="dt">uint8_t</span> left_rumble,</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>              <span class="dt">uint8_t</span> right_rumble,</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>              ButtonState&amp; current_button_states);</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Turn on/off analog mode (required to get joystick data)</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">bool</span> EnableAnalog();</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">bool</span> DisableAnalog();</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>};</span></code></pre></div>
<h4 id="function-description">Function Description</h4>
<p>Constructor</p>
<ul>
<li><code>DualShock(spi_interface)</code> - Create a DualShock object and pass in a pointer to a valid SPI interface.</li>
</ul>
<p>Connecting</p>
<ul>
<li><p><code>bool Connect()</code> - Connect to the controller. Returns true if connection succeeded, otherwise false.</p></li>
<li><p><code>bool Disconnect()</code> - Disconnect from the controller.</p></li>
<li><p><code>bool IsConnected()</code> - Check if the controller is properly connected.</p></li>
</ul>
<p>Polling</p>
<ul>
<li><p><code>void Poll(buttons)</code> - Grab the input data from the controller and copy it into the <code>buttons</code> object.</p></li>
<li><p><code>void Poll(left_rumble, right_rumble, buttons)</code> - Grab the input data from the controller, and send the controller a command to activate the rumble motors.</p></li>
</ul>
<p>Configuration</p>
<ul>
<li><p><code>bool EnableAnalog()</code> - Turn on analog mode (required for joysticks).</p></li>
<li><p><code>bool DisableAnalog()</code> - Turn off analog mode.</p></li>
</ul>
<h3 id="example">Example</h3>
<p>Below is a complete example of using the DualShock class with an Arduino Uno. In this example, pressing X on the controller will cause an external LED to light up.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode c++"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">// mysketch.ino</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;embedded_tools/spi/adrian_spi_arduino.hpp&quot;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;embedded_tools/ps2/adrian_dualshock.hpp&quot;</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">// Globals</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="at">static</span> adrian::ArduinoSPI spi;</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="at">static</span> adrian::ArduinoGPIO select_pin(<span class="dv">10</span>);</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="at">static</span> adrian::ArduinoGPIO led(<span class="dv">9</span>);</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="at">static</span> adrian::DualShock ps2_controller(&amp;spi_impl, &amp;select_pin);</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="at">static</span> adrian::DualShock::ButtonState buttons;</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>setup()</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    spi.Initialize();</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    led.SetPinMode(adrian::GPIO::PM_OUTPUT);</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    led.Write(<span class="dv">0</span>);</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>loop()</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Poll the controller for the button status.</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    ps2_controller.Poll(buttons);</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>    <span class="co">// If the X button is pressed, light up the LED.</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>    led.Write((buttons.digital_valid &amp;&amp; buttons.cross));</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>    delay(<span class="dv">100</span>);</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2 id="sources">Sources</h2>
<p>This data was collected over time from various sites, and I want to pay credit to those who have gone before me and did the hard work of reverse engineering the SPI protocols.</p>
<ol type="1">
<li><p>Curious Inventor - Interfacing a PS2 (PlayStation 2) Controller: <a href="http://store.curiousinventor.com/guides/PS2"><a href="http://store.curiousinventor.com/guides/PS2">http://store.curiousinventor.com/guides/PS2</a></a></p></li>
<li><p>SPI (Serial Peripheral Interface): <a href="https://en.wikipedia.org/wiki/Serial_Peripheral_Interface"><a href="https://en.wikipedia.org/wiki/Serial_Peripheral_Interface">https://en.wikipedia.org/wiki/Serial_Peripheral_Interface</a></a></p></li>
</ol>
</body>
</html>
